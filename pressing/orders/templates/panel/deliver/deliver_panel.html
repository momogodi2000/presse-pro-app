{% extends 'panel/base/base_deliver.html' %}
{% load static %}

{% block title %}Deliver Panel - Dashboard{% endblock %}

{% block content %}
<div class="container">
    <!-- Page Title -->
    <section class="mt-5">
        <h1 class="text-center">Welcome to the Deliver Panel</h1>
        <p class="text-center text-muted">Manage your deliveries, track geolocation, and promote pressing services.</p>
    </section>

    <!-- Delivery Status Tracker -->
    <section class="delivery-status mt-5">
        <h2>Delivery Status Tracker</h2>
        <div class="row">
            <div class="col-md-4 mb-3">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Pending Deliveries</h5>
                        <p class="card-text">Manage and update delivery statuses.</p>
                        <button class="btn btn-warning">View Pending</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">In-Transit Deliveries</h5>
                        <p class="card-text">Track deliveries currently in progress.</p>
                        <button class="btn btn-info">Track In-Transit</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Completed Deliveries</h5>
                        <p class="card-text">View completed and delivered orders.</p>
                        <button class="btn btn-success">View Completed</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Geolocation Section -->
    <section class="geolocation mt-5">
        <h2>Geolocation</h2>
        <button class="btn btn-primary" id="get-location">Get My Location</button>
        <p id="location-output" class="mt-3"></p>
        <div id="map" class="map-container mt-3" style="height: 400px;"></div>
    </section>

    <!-- Image and Video Publicity Section -->
    <section class="publicity mt-5">
        <h2>Publicity & Promotion</h2>
        <div class="row">
            <!-- Image Promotion -->
            <div class="col-md-6 mb-3">
                <h4>Featured Promotion Image</h4>
                <img src="{% static 'image/wash.jpeg' %}" alt="Promotion Image" class="img-fluid rounded shadow">
            </div>
            <!-- Video Promotion -->
            <div class="col-md-6 mb-3">
                <h4>Featured Promotion Video</h4>
                <video controls class="w-100 shadow rounded">
                    <source src="{% static 'assets/videos.mp4' %}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </section>
</div>

<!-- Footer -->
<footer class="text-center mt-5">
    <p>&copy; 2024 Pressing App - Deliver Panel</p>
</footer>

<!-- Custom Styles and Animation -->
<style>
    /* Map container */
    #map {
        height: 400px;
        width: 100%;
    }

    /* Card Hover Animation */
    .card {
        transition: transform 0.3s ease;
    }

    .card:hover {
        transform: scale(1.05);
    }

    /* Button Hover Animation */
    .btn {
        transition: background-color 0.3s ease, transform 0.3s ease;
    }

    .btn:hover {
        background-color: #007bff;
        transform: scale(1.05);
    }

    /* Geolocation and Publicity Section */
    .publicity img, .publicity video {
        max-height: 350px;
        object-fit: cover;
    }

    /* Footer Styling */
    footer {
        background-color: #f8f9fa;
        padding: 20px;
        position: relative;
        bottom: 0;
        width: 100%;
    }

    /* Mobile Responsive Adjustments */
    @media (max-width: 768px) {
        h2 {
            font-size: 1.5rem;
        }

        .card-title {
            font-size: 1.25rem;
        }

        #map {
            height: 250px;
        }

        .publicity img, .publicity video {
            max-height: 250px;
        }
    }
</style>

<!-- Custom JavaScript -->
<script>
    // Geolocation Script
    document.getElementById('get-location').addEventListener('click', function() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(showPosition, showError);
        } else {
            document.getElementById('location-output').innerHTML = "Geolocation is not supported by this browser.";
        }
    });

    function showPosition(position) {
        const lat = position.coords.latitude;
        const lon = position.coords.longitude;
        document.getElementById('location-output').innerHTML = `Latitude: ${lat}, Longitude: ${lon}`;
        initMap(lat, lon);
    }

    function showError(error) {
        const output = document.getElementById('location-output');
        switch (error.code) {
            case error.PERMISSION_DENIED:
                output.innerHTML = "User denied the request for Geolocation.";
                break;
            case error.POSITION_UNAVAILABLE:
                output.innerHTML = "Location information is unavailable.";
                break;
            case error.TIMEOUT:
                output.innerHTML = "The request to get user location timed out.";
                break;
            case error.UNKNOWN_ERROR:
                output.innerHTML = "An unknown error occurred.";
                break;
        }
    }

    // Initialize Google Map
    function initMap(lat, lon) {
        const map = new google.maps.Map(document.getElementById('map'), {
            center: { lat: lat, lng: lon },
            zoom: 13,
        });

        new google.maps.Marker({
            position: { lat: lat, lng: lon },
            map: map,
            title: 'You are here',
        });
    }
</script>

<!-- Google Maps API -->
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAOVYRIgupAurZup5y1PRh8Ismb1A3lLao&callback=initMap" async defer></script>
{% endblock %}